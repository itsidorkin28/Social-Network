(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{100:function(e,t,s){e.exports={post:"Post_post__1jere"}},101:function(e,t,s){},145:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),i=(s(83),s(32)),a=s(16),r=s(15),o=s(196),l=s(42),u=s.n(l),j=u.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1e90b645-3ab8-4f0b-b1bb-01b70c47396d"}}),b=function(e){return j.get("profile/".concat(e))},d={posts:[{id:Object(o.a)(),post:"Hello!",likesCount:3},{id:Object(o.a)(),post:"JS!",likesCount:9}],postText:"",profile:{aboutMe:"\u044f \u043a\u0440\u0443\u0442\u043e \u0447\u0443\u0432\u0430\u043a 1001%",contacts:{facebook:"facebook.com",website:"ffds",vk:"vk.com/dimych",twitter:"https://twitter.com/@sdf",instagram:"instagra.com/sds",youtube:"fdsfds",github:"github.com",mainLink:"fdsfds"},lookingForAJob:!0,lookingForAJobDescription:"\u043d\u0435 \u0438\u0449\u0443, \u0430 \u0434\u0443\u0440\u0430\u0447\u0443\u0441\u044c",fullName:"samurai dimych",userId:2,photos:{small:"https://social-network.samuraijs.com/activecontent/images/users/2/user-small.jpg?v=0",large:"https://social-network.samuraijs.com/activecontent/images/users/2/user.jpg?v=0"}}},O={dialogs:[{id:Object(o.a)(),name:"Alexander"},{id:Object(o.a)(),name:"Alena"}],messages:[{id:Object(o.a)(),message:"Hello!"},{id:Object(o.a)(),message:"How are you?"}],messageText:""},f=u.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1e90b645-3ab8-4f0b-b1bb-01b70c47396d"}}),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return f.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return console.log(e.data),e.data}))},g=function(e){return f.post("follow/".concat(e))},h=function(e){return f.delete("follow/".concat(e))},x={usersList:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,isFollowing:[],disableButton:!1},p=function(e,t){return{type:"TOGGLE_IS_FOLLOWING",disableButton:e,userID:t}},v=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},T=function(e,t){return function(s){s(v(!0)),m(e,t).then((function(e){s(v(!1)),s({type:"SET-USERS",users:e.items}),s({type:"SET-TOTAL-USERS-COUNT",totalUsersCount:e.totalCount})}))}},E=u.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1e90b645-3ab8-4f0b-b1bb-01b70c47396d"}}),_=function(){return E.get("auth/me")},w={data:{id:20566,login:"itsidorkin",email:"itsidorkin28@gmail.com"},messages:[],fieldsErrors:[],resultCode:0,isAuth:!1},C=function(e){_().then((function(t){if(0===t.data.resultCode){var s=t.data.data,n=s.id,c=s.login,i=s.email;e(function(e,t,s){return{type:"SET-AUTH-USER-DATA",data:{id:e,login:t,email:s}}}(n,c,i))}}))},y=s(94),S=Object(i.b)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var s={id:Object(o.a)(),post:t.postText,likesCount:0};return Object(r.a)(Object(r.a)({},e),{},{posts:[s].concat(Object(a.a)(e.posts)),postText:""});case"CHANGE-POST-TEXT":return Object(r.a)(Object(r.a)({},e),{},{postText:t.postText});case"SET-USER-PROFILE":return Object(r.a)(Object(r.a)({},e),{},{profile:t.profile});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var s={id:Object(o.a)(),message:t.messageText};return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(a.a)(e.messages),[s]),messageText:""});case"CHANGE-MESSAGE-TEXT":return Object(r.a)(Object(r.a)({},e),{},{messageText:t.messageText});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(r.a)(Object(r.a)({},e),{},{usersList:e.usersList.map((function(e){return e.id===t.id?Object(r.a)(Object(r.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(r.a)(Object(r.a)({},e),{},{usersList:e.usersList.map((function(e){return e.id===t.id?Object(r.a)(Object(r.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(r.a)(Object(r.a)({},e),{},{usersList:t.users});case"SET-CURRENT-PAGE":return Object(r.a)(Object(r.a)({},e),{},{currentPage:t.currentPage});case"SET-TOTAL-USERS-COUNT":return Object(r.a)(Object(r.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(r.a)(Object(r.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING":return Object(r.a)(Object(r.a)({},e),{},{isFollowing:t.disableButton?[].concat(Object(a.a)(e.isFollowing),[t.userID]):Object(a.a)(e.isFollowing.filter((function(e){return e!==t.userID})))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-AUTH-USER-DATA":return Object(r.a)(Object(r.a)(Object(r.a)({},e),t.data),{},{isAuth:!0});default:return e}}}),P=Object(i.d)(S,Object(i.a)(y.a));console.log(window.store=P);var N=s(29),A=s.n(N),L=s(69),k=s.n(L),I=s(53),F=s.n(I),U=s(24),G=s(1);function D(){return Object(G.jsxs)("nav",{className:F.a.navbar,children:[Object(G.jsx)("div",{children:Object(G.jsx)(U.b,{to:"/profile",className:function(e){return e.isActive?F.a.active:""},children:"Profile"})}),Object(G.jsx)("div",{children:Object(G.jsx)(U.b,{to:"/dialogs",className:function(e){return e.isActive?F.a.active:""},children:"Messages"})}),Object(G.jsx)("div",{children:Object(G.jsx)(U.b,{to:"/users",className:function(e){return e.isActive?F.a.active:""},children:"Find Users"})})]})}var R=s(199),H=s(14),M=s(17),J=s(64),K=s.n(J),W=s(72),B=s.n(W),z=function(e){var t=e.id,s=e.name,n="/dialogs/".concat(t);return Object(G.jsx)("div",{className:B.a.dialogItem,children:Object(G.jsx)(U.b,{to:n,className:function(e){return e.isActive?B.a.active:""},children:s})})},X=s(97),Y=s.n(X),q=function(e){e.id;var t=e.message;return Object(G.jsx)("div",{className:Y.a.message,children:t})},Z=s(200),Q=s(193),V=s(191),$=s(201),ee=s(98),te=s.n(ee),se=function(e){var t=e.dialogs,s=e.messages,c=e.messageText,i=Object(M.b)(),a=t.map((function(e){return Object(G.jsx)(z,{id:e.id,name:e.name},e.id)})),r=s.map((function(e){return Object(G.jsx)(q,{id:e.id,message:e.message},e.id)})),o=Object(n.useCallback)((function(){var e=c.trim();e&&i(function(e){return{type:"SEND-MESSAGE",messageText:e}}(e))}),[i,c]);return Object(G.jsxs)("div",{className:K.a.dialogs,children:[Object(G.jsx)("div",{className:K.a.dialogsItems,children:a}),Object(G.jsxs)("div",{className:K.a.messagesItems,children:[r,Object(G.jsxs)("div",{children:[Object(G.jsx)(Z.a,{component:"form",sx:{"& .MuiTextField-root":{mb:1,width:"100%"}},noValidate:!0,autoComplete:"off",children:Object(G.jsx)(Q.a,{id:"outlined-multiline-flexible",label:"Type message",multiline:!0,maxRows:4,value:c,onChange:function(e){i(function(e){return{type:"CHANGE-MESSAGE-TEXT",messageText:e}}(e.currentTarget.value))},onKeyPress:function(e){e.ctrlKey&&"Enter"===e.key&&o()}})}),Object(G.jsx)(V.a,{direction:"row",spacing:1,children:Object(G.jsx)($.a,{variant:"contained",endIcon:Object(G.jsx)(te.a,{}),onClick:o,children:"Send"})})]})]})]})};function ne(e){return function(t){return Object(M.c)((function(e){return e.auth.isAuth}))?Object(G.jsx)(e,Object(r.a)({},t)):Object(G.jsx)(H.a,{to:"/login"})}}var ce=ne((function(){var e=Object(M.c)((function(e){return e.dialogsPage.dialogs})),t=Object(M.c)((function(e){return e.dialogsPage.messages})),s=Object(M.c)((function(e){return e.dialogsPage.messageText}));return Object(G.jsx)(se,{dialogs:e,messages:t,messageText:s})})),ie=Object(i.c)(ne)(ce),ae=s(198),re=s(76),oe=s.n(re),le=c.a.memo((function(e){var t=e.usersList,s=e.isFollowing,n=e.followUserHandler,c=e.unfollowUserHandler;return Object(G.jsx)("div",{children:Object(G.jsx)("div",{className:oe.a.users,children:t.map((function(e){var t;return Object(G.jsxs)("div",{className:oe.a.user,children:[Object(G.jsx)("div",{children:Object(G.jsx)(U.b,{to:"/profile/"+e.id,children:Object(G.jsx)(ae.a,{alt:e.name,src:null===(t=e.photos)||void 0===t?void 0:t.small,sx:{width:100,height:100}})})}),Object(G.jsx)("div",{children:e.followed?Object(G.jsx)($.a,{onClick:function(){return c(e.id)},variant:"contained",color:"error",size:"small",disabled:s.some((function(t){return t===e.id})),children:"Unfollow"}):Object(G.jsx)($.a,{onClick:function(){return n(e.id)},variant:"contained",color:"success",size:"small",disabled:s.some((function(t){return t===e.id})),children:"Follow"})}),Object(G.jsx)("span",{children:e.name}),Object(G.jsx)("span",{children:e.status})]},e.id)}))})})})),ue=s(195),je=s(205),be=ne((function(){var e=Object(M.b)(),t=Object(M.c)((function(e){return e.usersPage.isFetching})),s=Object(M.c)((function(e){return e.usersPage.isFollowing})),c=Object(M.c)((function(e){return e.usersPage.usersList})),i=Object(M.c)((function(e){return e.usersPage.pageSize})),a=Object(M.c)((function(e){return e.usersPage.totalUsersCount})),r=Object(M.c)((function(e){return e.usersPage.currentPage}));Object(n.useEffect)((function(){e(T(r,i))}),[e,r,i]);var o=Object(n.useCallback)((function(t){e(T(t,i))}),[e,i]),l=Object(n.useCallback)((function(t){e(function(e){return function(t){t(p(!0,e)),g(e).then((function(s){0===s.data.resultCode&&t({type:"FOLLOW",id:e}),t(p(!1,e))}))}}(t))}),[e]),u=Object(n.useCallback)((function(t){e(function(e){return function(t){t(p(!0,e)),h(e).then((function(s){0===s.data.resultCode&&t({type:"UNFOLLOW",id:e}),t(p(!1,e))}))}}(t))}),[e]),j=Math.ceil(a/i);return Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[Object(G.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(G.jsx)(ue.a,{count:j,color:"primary",onChange:function(e,t){return o(t)}})}),t?Object(G.jsx)(je.a,{style:{marginTop:"30px",marginBottom:"20px"}}):Object(G.jsx)(le,{usersList:c,isFollowing:s,followUserHandler:l,unfollowUserHandler:u})]})})),de=Object(i.c)(ne)(be),Oe=s(61),fe=s.n(Oe),me=s(99),ge=s.n(me),he=function(e){var t,s=e.profile;return Object(G.jsxs)("div",{className:ge.a.userDescription,children:[Object(G.jsx)("h3",{children:s.fullName}),Object(G.jsx)(ae.a,{alt:s.fullName,src:null===(t=s.photos)||void 0===t?void 0:t.large,sx:{width:150,height:150},style:{marginBottom:"15px"}}),Object(G.jsx)("span",{children:s.aboutMe})]})},xe=s(100),pe=s.n(xe);var ve=function(e){return Object(G.jsxs)("div",{className:pe.a.post,children:[Object(G.jsx)(ae.a,{src:"",sx:{width:50,height:50}}),Object(G.jsx)("span",{children:e.post}),Object(G.jsxs)("span",{children:["Likes: ",e.likesCount]})]})},Te=s(77),Ee=s.n(Te),_e=s(206),we=s(192),Ce=function(e){var t=e.profilePage,s=Object(M.b)(),c=t.posts.map((function(e){return Object(G.jsx)(ve,{id:e.id,post:e.post,likesCount:e.likesCount},e.id)})),i=Object(n.useCallback)((function(){var e=t.postText.trim();e&&s({type:"ADD-POST",postText:e})}),[s,t.postText]);return Object(G.jsxs)("div",{className:Ee.a.myPosts,children:[Object(G.jsx)("h3",{children:"All posts"}),Object(G.jsxs)("div",{className:Ee.a.postForm,children:[Object(G.jsx)(Q.a,{id:"outlined-multiline-flexible",label:"What's new?",multiline:!0,maxRows:4,value:t.postText,onChange:function(e){s({type:"CHANGE-POST-TEXT",postText:e.currentTarget.value})},onKeyPress:function(e){e.ctrlKey&&"Enter"===e.key&&i()}}),Object(G.jsx)(_e.a,{onClick:i,style:{marginLeft:"5px"},children:Object(G.jsx)(we.a,{color:"primary"})})]}),c]})},ye=c.a.memo((function(){var e=Object(M.c)((function(e){return e.profilePage}));return Object(G.jsx)(Ce,{profilePage:e})})),Se=c.a.memo((function(e){var t=e.profile;return Object(G.jsxs)("div",{className:fe.a.profile,children:[Object(G.jsx)(he,{profile:t}),Object(G.jsx)(ye,{})]})})),Pe=ne((function(){var e=Object(M.b)(),t=Object(M.c)((function(e){return e.profilePage.profile})),s=Object(H.h)().userId;return s||(s="2"),Object(n.useEffect)((function(){var t;e((t=s,function(e){b(t).then((function(t){e({type:"SET-USER-PROFILE",profile:t.data})}))}))}),[e,s]),Object(G.jsx)("div",{className:fe.a.profile,children:Object(G.jsx)(Se,{profile:t})})})),Ne=Object(i.c)(ne)(Pe),Ae=s(101),Le=s.n(Ae),ke=c.a.memo((function(){return Object(M.c)((function(e){return e.auth.isAuth}))?Object(G.jsx)(H.a,{to:"/profile"}):Object(G.jsx)("div",{className:Le.a.login,children:Object(G.jsx)("h1",{children:"Login"})})})),Ie=function(){return Object(G.jsx)("main",{children:Object(G.jsxs)(H.d,{children:[Object(G.jsx)(H.b,{path:"profile",element:Object(G.jsx)(Ne,{}),children:Object(G.jsx)(H.b,{path:":userId",element:Object(G.jsx)(Ne,{})})}),Object(G.jsx)(H.b,{path:"dialogs",element:Object(G.jsx)(ie,{})}),Object(G.jsx)(H.b,{path:"users",element:Object(G.jsx)(de,{})}),Object(G.jsx)(H.b,{path:"login",element:Object(G.jsx)(ke,{})}),Object(G.jsx)(H.b,{path:"*",element:Object(G.jsx)("div",{children:Object(G.jsx)("p",{children:"404 error"})})})]})})},Fe=s(202),Ue=s(203),Ge=s(204),De=n.memo((function(e){var t=e.isAuth,s=e.login;return Object(G.jsx)("header",{children:Object(G.jsx)(Z.a,{sx:{flexGrow:1,mb:2},children:Object(G.jsx)(Fe.a,{position:"static",children:Object(G.jsxs)(Ue.a,{children:[Object(G.jsx)(Ge.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"SOCIAL NETWORK"}),t?s:Object(G.jsx)($.a,{color:"inherit",children:"Login"})]})})})})})),Re=n.memo((function(){var e=Object(M.c)((function(e){return e.auth.isAuth})),t=Object(M.c)((function(e){return e.auth.data.login})),s=Object(M.b)();return Object(n.useEffect)((function(){s(C)}),[s]),Object(G.jsx)(De,{isAuth:e,login:t})})),He=function(){return Object(G.jsxs)("div",{className:k.a.app,children:[Object(G.jsx)(Re,{}),Object(G.jsx)(D,{}),Object(G.jsx)(R.a,{style:{padding:"15px 15px"},children:Object(G.jsx)(Ie,{})})]})},Me=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,207)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;s(e),n(e),c(e),i(e),a(e)}))};A.a.render(Object(G.jsx)(U.a,{children:Object(G.jsx)(M.a,{store:P,children:Object(G.jsx)(He,{})})}),document.getElementById("root")),Me()},53:function(e,t,s){e.exports={navbar:"Navbar_navbar__10UeP",active:"Navbar_active__21R_N"}},61:function(e,t,s){e.exports={profile:"Profile_profile__15I9R"}},64:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__2Gkkf",dialogsItems:"Dialogs_dialogsItems__2PZ9i",messagesItems:"Dialogs_messagesItems__3JX3o"}},69:function(e,t,s){},72:function(e,t,s){e.exports={dialogItem:"DialogItem_dialogItem__1nzJQ",active:"DialogItem_active__JdILs"}},76:function(e,t,s){e.exports={users:"Users_users__3CRqz",user:"Users_user__1d1r4"}},77:function(e,t,s){e.exports={myPosts:"MyPosts_myPosts__2AZpm",postForm:"MyPosts_postForm__1ywSN"}},83:function(e,t,s){},97:function(e,t,s){e.exports={message:"Message_message__27Afv"}},99:function(e,t,s){e.exports={userDescription:"UserDescription_userDescription__37qmJ"}}},[[145,1,2]]]);
//# sourceMappingURL=main.fcbae975.chunk.js.map