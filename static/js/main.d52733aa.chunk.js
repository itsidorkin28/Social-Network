(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{100:function(e,t,s){e.exports={post:"Post_post__1jere"}},144:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s.n(n),a=(s(84),s(78)),c=s(14),r=s(16),o=s(197),l={posts:[{id:Object(o.a)(),post:"Hello!",likesCount:3},{id:Object(o.a)(),post:"JS!",likesCount:9}],postText:"",profile:{aboutMe:"\u044f \u043a\u0440\u0443\u0442\u043e \u0447\u0443\u0432\u0430\u043a 1001%",contacts:{facebook:"facebook.com",website:"ffds",vk:"vk.com/dimych",twitter:"https://twitter.com/@sdf",instagram:"instagra.com/sds",youtube:"fdsfds",github:"github.com",mainLink:"fdsfds"},lookingForAJob:!0,lookingForAJobDescription:"\u043d\u0435 \u0438\u0449\u0443, \u0430 \u0434\u0443\u0440\u0430\u0447\u0443\u0441\u044c",fullName:"samurai dimych",userId:2,photos:{small:"https://social-network.samuraijs.com/activecontent/images/users/2/user-small.jpg?v=0",large:"https://social-network.samuraijs.com/activecontent/images/users/2/user.jpg?v=0"}}},u={dialogs:[{id:Object(o.a)(),name:"Alexander"},{id:Object(o.a)(),name:"Alena"}],messages:[{id:Object(o.a)(),message:"Hello!"},{id:Object(o.a)(),message:"How are you?"}],messageText:""},d=s(33),j=s.n(d),b=j.a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1e90b645-3ab8-4f0b-b1bb-01b70c47396d"}}),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return b.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},f={usersList:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,isFollowing:[],disableButton:!1},m=function(e,t){return{type:"TOGGLE_IS_FOLLOWING",disableButton:e,userID:t}},g=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},h=function(e){return{type:"SET-USERS",users:e}},p=function(e){return{type:"SET-TOTAL-USERS-COUNT",totalUsersCount:e}},x={data:{id:20566,login:"itsidorkin",email:"itsidorkin28@gmail.com"},messages:[],fieldsErrors:[],resultCode:0,isAuth:!1},v=Object(a.a)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var s={id:Object(o.a)(),post:t.postText,likesCount:0};return Object(r.a)(Object(r.a)({},e),{},{posts:[s].concat(Object(c.a)(e.posts)),postText:""});case"CHANGE-POST-TEXT":return Object(r.a)(Object(r.a)({},e),{},{postText:t.postText});case"SET-USER-PROFILE":return Object(r.a)(Object(r.a)({},e),{},{profile:t.profile});default:return e}},dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var s={id:Object(o.a)(),message:t.messageText};return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(c.a)(e.messages),[s]),messageText:""});case"CHANGE-MESSAGE-TEXT":return Object(r.a)(Object(r.a)({},e),{},{messageText:t.messageText});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(r.a)(Object(r.a)({},e),{},{usersList:e.usersList.map((function(e){return e.id===t.id?Object(r.a)(Object(r.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(r.a)(Object(r.a)({},e),{},{usersList:e.usersList.map((function(e){return e.id===t.id?Object(r.a)(Object(r.a)({},e),{},{followed:!1}):e}))});case"SET-USERS":return Object(r.a)(Object(r.a)({},e),{},{usersList:t.users});case"SET-CURRENT-PAGE":return Object(r.a)(Object(r.a)({},e),{},{currentPage:t.currentPage});case"SET-TOTAL-USERS-COUNT":return Object(r.a)(Object(r.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(r.a)(Object(r.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING":return Object(r.a)(Object(r.a)({},e),{},{isFollowing:t.disableButton?[].concat(Object(c.a)(e.isFollowing),[t.userID]):Object(c.a)(e.isFollowing.filter((function(e){return e!==t.userID})))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-AUTH-USER-DATA":return Object(r.a)(Object(r.a)(Object(r.a)({},e),t.data),{},{isAuth:!0});default:return e}}}),T=Object(a.b)(v);console.log(window.store=T);var E=s(29),P=s.n(E),_=s(69),w=s.n(_),y=s(52),S=s.n(y),C=s(26),N=s(1);function A(){return Object(N.jsxs)("nav",{className:S.a.navbar,children:[Object(N.jsx)("div",{children:Object(N.jsx)(C.b,{to:"/profile",className:function(e){return e.isActive?S.a.active:""},children:"Profile"})}),Object(N.jsx)("div",{children:Object(N.jsx)(C.b,{to:"/dialogs",className:function(e){return e.isActive?S.a.active:""},children:"Messages"})}),Object(N.jsx)("div",{children:Object(N.jsx)(C.b,{to:"/users",className:function(e){return e.isActive?S.a.active:""},children:"Find Users"})})]})}var L=s(201),I=s(199),k=s(202),F=s(15),U=s(18),G=s(63),D=s.n(G),R=s(72),M=s.n(R),H=function(e){var t="/dialogs/".concat(e.id);return Object(N.jsx)("div",{className:M.a.dialogItem,children:Object(N.jsx)(C.b,{to:t,className:function(e){return e.isActive?M.a.active:""},children:e.name})})},J=s(97),W=s.n(J),K=function(e){return Object(N.jsx)("div",{className:W.a.message,children:e.message})},B=s(203),z=s(194),X=s(192),Y=s(204),q=s(98),Z=s.n(q),Q=Object(U.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{changeMessage:function(t){var s={type:"CHANGE-MESSAGE-TEXT",messageText:t};e(s)},sendMessage:function(t){var s={type:"SEND-MESSAGE",messageText:t};e(s)}}}))((function(e){var t=e.dialogsPage.dialogs.map((function(e){return Object(N.jsx)(H,{id:e.id,name:e.name},e.id)})),s=e.dialogsPage.messages.map((function(e){return Object(N.jsx)(K,{id:e.id,message:e.message},e.id)})),n=function(){var t=e.dialogsPage.messageText.trim();t&&e.sendMessage(t)};return Object(N.jsxs)("div",{className:D.a.dialogs,children:[Object(N.jsx)("div",{className:D.a.dialogsItems,children:t}),Object(N.jsxs)("div",{className:D.a.messagesItems,children:[s,Object(N.jsxs)("div",{children:[Object(N.jsx)(B.a,{component:"form",sx:{"& .MuiTextField-root":{mb:1,width:"100%"}},noValidate:!0,autoComplete:"off",children:Object(N.jsx)(z.a,{id:"outlined-multiline-flexible",label:"Type message",multiline:!0,maxRows:4,value:e.dialogsPage.messageText,onChange:function(t){e.changeMessage(t.currentTarget.value)},onKeyPress:function(e){e.ctrlKey&&"Enter"===e.key&&n()}})}),Object(N.jsx)(X.a,{direction:"row",spacing:1,children:Object(N.jsx)(Y.a,{variant:"contained",endIcon:Object(N.jsx)(Z.a,{}),onClick:n,children:"Send"})})]})]})]})})),V=s(200),$=s(76),ee=s.n($),te=i.a.memo((function(e){var t=e.usersList,s=e.isFollowing,n=Object(U.c)();return Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:ee.a.users,children:t.map((function(e){var t;return Object(N.jsxs)("div",{className:ee.a.user,children:[Object(N.jsx)("div",{children:Object(N.jsx)(C.b,{to:"/profile/"+e.id,children:Object(N.jsx)(V.a,{alt:e.name,src:null===(t=e.photos)||void 0===t?void 0:t.small,sx:{width:100,height:100}})})}),Object(N.jsx)("div",{children:e.followed?Object(N.jsx)(Y.a,{onClick:function(){n(m(!0,e.id)),j.a.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(e.id),{withCredentials:!0,headers:{"API-KEY":"1e90b645-3ab8-4f0b-b1bb-01b70c47396d"}}).then((function(t){0===t.data.resultCode&&n({type:"UNFOLLOW",id:e.id}),n(m(!1,e.id))}))},variant:"contained",color:"error",size:"small",disabled:s.some((function(t){return t===e.id})),children:"Unfollow"}):Object(N.jsx)(Y.a,{onClick:function(){n(m(!0,e.id)),j.a.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(e.id),{},{withCredentials:!0,headers:{"API-KEY":"1e90b645-3ab8-4f0b-b1bb-01b70c47396d"}}).then((function(t){0===t.data.resultCode&&n({type:"FOLLOW",id:e.id}),n(m(!1,e.id))}))},variant:"contained",color:"success",size:"small",disabled:s.some((function(t){return t===e.id})),children:"Follow"})}),Object(N.jsx)("span",{children:e.name}),Object(N.jsx)("span",{children:e.status})]},e.id)}))})})})),se=s(196),ne=s(208),ie=i.a.memo((function(){var e=Object(U.c)(),t=Object(U.d)((function(e){return e.usersPage.isFetching})),s=Object(U.d)((function(e){return e.usersPage.isFollowing})),i=Object(U.d)((function(e){return e.usersPage.usersList})),a=Object(U.d)((function(e){return e.usersPage.pageSize})),c=Object(U.d)((function(e){return e.usersPage.totalUsersCount})),r=Object(U.d)((function(e){return e.usersPage.currentPage}));Object(n.useEffect)((function(){e(g(!0)),O(r,a).then((function(t){e(g(!1)),e(h(t.items)),e(p(t.totalCount))}))}),[]);var o=Object(n.useCallback)((function(t){e(function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}}(t)),e(g(!0)),O(t,a).then((function(t){e(g(!1)),e(h(t.items))}))}),[]),l=Math.ceil(c/a);return Object(N.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[Object(N.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(N.jsx)(se.a,{count:l,color:"primary",onChange:function(e,t){return o(t)}})}),t?Object(N.jsx)(ne.a,{style:{marginTop:"30px",marginBottom:"20px"}}):Object(N.jsx)(te,{usersList:i,isFollowing:s})]})})),ae=s(60),ce=s.n(ae),re=s(99),oe=s.n(re);var le=function(e){var t;return Object(N.jsxs)("div",{className:oe.a.userDescription,children:[Object(N.jsx)("h3",{children:e.profile.fullName}),Object(N.jsx)(V.a,{alt:e.profile.fullName,src:null===(t=e.profile.photos)||void 0===t?void 0:t.large,sx:{width:150,height:150},style:{marginBottom:"15px"}}),Object(N.jsx)("span",{children:e.profile.aboutMe})]})},ue=s(100),de=s.n(ue);var je=function(e){return Object(N.jsxs)("div",{className:de.a.post,children:[Object(N.jsx)(V.a,{src:"",sx:{width:50,height:50}}),Object(N.jsx)("span",{children:e.post}),Object(N.jsxs)("span",{children:["Likes: ",e.likesCount]})]})},be=s(77),Oe=s.n(be),fe=s(209),me=s(193),ge=Object(U.b)((function(e){return{profilePage:e.profilePage}}),{changePost:function(e){return{type:"CHANGE-POST-TEXT",postText:e}},addPost:function(e){return{type:"ADD-POST",postText:e}}})((function(e){var t=e.profilePage.posts.map((function(e){return Object(N.jsx)(je,{id:e.id,post:e.post,likesCount:e.likesCount},e.id)})),s=function(){var t=e.profilePage.postText.trim();t&&e.addPost(t)};return Object(N.jsxs)("div",{className:Oe.a.myPosts,children:[Object(N.jsx)("h3",{children:"All posts"}),Object(N.jsxs)("div",{className:Oe.a.postForm,children:[Object(N.jsx)(z.a,{id:"outlined-multiline-flexible",label:"What's new?",multiline:!0,maxRows:4,value:e.profilePage.postText,onChange:function(t){e.changePost(t.currentTarget.value)},onKeyPress:function(e){e.ctrlKey&&"Enter"===e.key&&s()}}),Object(N.jsx)(fe.a,{onClick:s,style:{marginLeft:"5px"},children:Object(N.jsx)(me.a,{color:"primary"})})]}),t]})}));function he(e){var t=e.profile;return Object(N.jsxs)("div",{className:ce.a.profile,children:[Object(N.jsx)(le,{profile:t}),Object(N.jsx)(ge,{})]})}var pe=i.a.memo((function(){var e=Object(U.c)(),t=Object(U.d)((function(e){return e.profilePage.profile})),s=Object(F.g)().userId;return Object(n.useEffect)((function(){j.a.get("https://social-network.samuraijs.com/api/1.0/profile/".concat(s)).then((function(t){e(function(e){return{type:"SET-USER-PROFILE",profile:e}}(t.data))}))}),[]),Object(N.jsx)("div",{className:ce.a.profile,children:Object(N.jsx)(he,{profile:t})})})),xe=function(){return Object(N.jsx)("div",{children:Object(N.jsxs)(F.c,{children:[Object(N.jsx)(F.a,{path:"/profile/:userId",element:Object(N.jsx)(pe,{})}),Object(N.jsx)(F.a,{path:"/dialogs",element:Object(N.jsx)(Q,{})}),Object(N.jsx)(F.a,{path:"/users",element:Object(N.jsx)(ie,{})}),Object(N.jsx)(F.a,{path:"*",element:Object(N.jsx)("main",{children:Object(N.jsx)("p",{children:"There's nothing here!"})})})]})})},ve=s(205),Te=s(206),Ee=s(207),Pe=n.memo((function(e){var t=e.isAuth,s=e.login;return Object(N.jsx)(B.a,{sx:{flexGrow:1,mb:2},children:Object(N.jsx)(ve.a,{position:"static",children:Object(N.jsxs)(Te.a,{children:[Object(N.jsx)(Ee.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:"SOCIAL NETWORK"}),t?s:Object(N.jsx)(Y.a,{color:"inherit",children:"Login"})]})})})})),_e=n.memo((function(){var e=Object(U.d)((function(e){return e.auth.isAuth})),t=Object(U.d)((function(e){return e.auth.data.login})),s=Object(U.c)();return Object(n.useEffect)((function(){j.a.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then((function(e){if(0===e.data.resultCode){var t=e.data.data,n=t.id,i=t.login,a=t.email;s(function(e,t,s){return{type:"SET-AUTH-USER-DATA",data:{id:e,login:t,email:s}}}(n,i,a))}}))}),[]),Object(N.jsx)(Pe,{isAuth:e,login:t})})),we=function(){return Object(N.jsxs)("div",{className:w.a.app,children:[Object(N.jsx)(_e,{}),Object(N.jsx)(k.a,{fixed:!0,maxWidth:"lg",children:Object(N.jsxs)(I.a,{container:!0,spacing:2,children:[Object(N.jsx)(I.a,{item:!0,xs:3,children:Object(N.jsx)(L.a,{style:{padding:"15px 0"},children:Object(N.jsx)(A,{})})}),Object(N.jsx)(I.a,{item:!0,xs:9,children:Object(N.jsx)(L.a,{style:{padding:"15px 15px"},children:Object(N.jsx)(xe,{})})})]})})]})},ye=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,210)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),i(e),a(e),c(e)}))};P.a.render(Object(N.jsx)(C.a,{children:Object(N.jsx)(U.a,{store:T,children:Object(N.jsx)(we,{})})}),document.getElementById("root")),ye()},52:function(e,t,s){e.exports={navbar:"Navbar_navbar__10UeP",active:"Navbar_active__21R_N"}},60:function(e,t,s){e.exports={profile:"Profile_profile__15I9R"}},63:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__2Gkkf",dialogsItems:"Dialogs_dialogsItems__2PZ9i",messagesItems:"Dialogs_messagesItems__3JX3o"}},69:function(e,t,s){},72:function(e,t,s){e.exports={dialogItem:"DialogItem_dialogItem__1nzJQ",active:"DialogItem_active__JdILs"}},76:function(e,t,s){e.exports={users:"Users_users__3CRqz",user:"Users_user__1d1r4"}},77:function(e,t,s){e.exports={myPosts:"MyPosts_myPosts__2AZpm",postForm:"MyPosts_postForm__1ywSN"}},84:function(e,t,s){},97:function(e,t,s){e.exports={message:"Message_message__27Afv"}},99:function(e,t,s){e.exports={userDescription:"UserDescription_userDescription__37qmJ"}}},[[144,1,2]]]);
//# sourceMappingURL=main.d52733aa.chunk.js.map